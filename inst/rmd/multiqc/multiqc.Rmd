---
author: "University of Melbourne Centre for Cancer Research"
date: "`r Sys.time()`"
output:
  html_document:
    theme: cosmo
    code_download: true
  rmdformats::material:
    highlight: kate
description: "UMCCR MultiQC JSON Summary"
title: "MultiQC JSON Summary"
---

```{r knitr_opts, include=F}
knitr::opts_chunk$set(
  collapse = TRUE, echo = TRUE,
  warning = FALSE, message = FALSE
)
```

```{r setup, message=FALSE, warning=FALSE}
library(dracarys)
library(dplyr)
library(tibble)
library(here)
```


```{r}
# multiqc_tidy_json(here("nogit/multiqc/dragen/wgs_alignment_qc/SBJ02402/MDX220189_dragen_alignment_multiqc_data.json"))
# multiqc_tidy_json(here("nogit/multiqc/dragen/wgs_alignment_qc/SBJ02402/MDX220190_dragen_alignment_multiqc_data.json"))
# multiqc_tidy_json(here("nogit/multiqc/dragen/wgs_tumor_normal/SBJ02402/MDX220190_dragen_somatic_multiqc_data.json"))
# multiqc_tidy_json(here("nogit/multiqc/dragen/wts_tumor_only/SBJ02402/MDX220191_dragen_transcriptome_multiqc_data.json"))
# multiqc_tidy_json(here("nogit/multiqc/dragen/umccrise/SBJ02403/SBJ02403__PRJ221333-multiqc_report_data.json"))
# multiqc_tidy_json(here("nogit/multiqc/bcbio/umccrise/SBJ00665__SBJ00665_PRJ200639_L2100018_multiqc_data.json"))
# multiqc_tidy_json(here("nogit/multiqc/bcbio/umccrise/SBJ02403__SBJ02403_PRJ221333_L2200722_multiqc_data.json"))
# multiqc_tidy_json(here("nogit/multiqc/bcbio/wts/SBJ02400_multiqc_data.json"))
# multiqc_tidy_json(here("nogit/multiqc/bcbio/wgs/SBJ02400_multiqc_data.json"))
# multiqc_tidy_json(here("nogit/multiqc/tso/PTC_TSOctDNA200901VD_L2000754/multiqc_data.json"))



x <- fs::dir_ls(here("nogit/multiqc"), regexp = "multiqc_data\\.json$", recurse = TRUE)
# debug
for (i in seq_len(length(x))) {
  print(i)
  MultiqcFile$new(x[i])$read()
}

# store
m <- x |>
  purrr::map_df(function(fn) {
    MultiqcFile$new(fn)$read()
  })
```
